{% extends "minimal/base.html" %}

{% block title %}{{ site.title }} - AI-Curated Tech News{% endblock %}
{% block description %}{{ site.description }}{% endblock %}

{% block body_class %}home{% endblock %}

{% block content %}
<div class="hero-section">
    <h2 class="hero-title">Latest Tech News</h2>
    <p class="hero-subtitle">AI-curated articles from leading technology sources</p>
    <div class="hero-stats">
        <span class="stat">{{ articles|length }} Articles</span>
        {% if last_updated %}
        <span class="stat">Updated {{ last_updated.strftime('%Y-%m-%d %H:%M UTC') }}</span>
        {% endif %}
    </div>
</div>

<div class="articles-grid">
    {% for article in articles %}
    <article class="article-card">
        <div class="article-header">
            <h3 class="article-title">
                <a href="/articles/{{ article.slug }}.html">{{ article.title }}</a>
            </h3>
            <div class="article-meta">
                <span class="article-source">{{ article.source | default('Unknown') }}</span>
                {% if article.generated_at %}
                <span class="article-date">{{ article.generated_at.strftime('%Y-%m-%d') }}</span>
                {% endif %}
                {% if article.quality_score %}
                <span class="article-quality">Quality: {{ (article.quality_score * 100)|round }}%</span>
                {% endif %}
            </div>
        </div>

        <div class="article-preview">
            {% if article.content %}
            <p>{{ article.content | preview(200) }}</p>
            {% else %}
            <p>No preview available</p>
            {% endif %}
        </div>

        <div class="article-footer">
            <div class="article-stats">
                {% if article.word_count %}
                <span class="word-count">{{ article.word_count }} words</span>
                {% endif %}
                {% if article.original_url %}
                <a href="{{ article.original_url }}" class="source-link" target="_blank" rel="noopener">
                    Original Source
                </a>
                {% endif %}
            </div>
            <a href="/articles/{{ article.slug }}.html" class="read-more">Read Article →</a>
        </div>
    </article>
    {% endfor %}
</div>

{% if articles|length == 0 %}
<div class="empty-state">
    <h3>No articles available</h3>
    <p>Check back soon for AI-curated technology news and insights.</p>
</div>
{% endif %}

<!-- Pagination Controls -->
{% if pagination and pagination.total_pages > 1 %}
<nav class="pagination" role="navigation" aria-label="Pagination">
    <!-- Previous Page -->
    {% if pagination.has_prev %}
    <a href="{% if pagination.prev_page == 1 %}/index.html{% else %}/page-{{ pagination.prev_page }}.html{% endif %}"
        class="pagination-link" aria-label="Previous page">
        ← Previous
    </a>
    {% else %}
    <span class="pagination-link disabled" aria-label="Previous page (disabled)">← Previous</span>
    {% endif %}

    <!-- Page Numbers -->
    {% for page_num in range(1, pagination.total_pages + 1) %}
    {% if page_num == pagination.current_page %}
    <span class="pagination-current" aria-current="page" aria-label="Page {{ page_num }}">{{ page_num }}</span>
    {% elif page_num == 1 or page_num == pagination.total_pages or (page_num >= pagination.current_page - 2 and page_num
    <= pagination.current_page + 2) %} <a
        href="{% if page_num == 1 %}/index.html{% else %}/page-{{ page_num }}.html{% endif %}" class="pagination-link"
        aria-label="Go to page {{ page_num }}">
        {{ page_num }}
        </a>
        {% elif page_num == pagination.current_page - 3 or page_num == pagination.current_page + 3 %}
        <span class="pagination-ellipsis" aria-hidden="true">…</span>
        {% endif %}
        {% endfor %}

        <!-- Next Page -->
        {% if pagination.has_next %}
        <a href="/page-{{ pagination.next_page }}.html" class="pagination-link" aria-label="Next page">
            Next →
        </a>
        {% else %}
        <span class="pagination-link disabled" aria-label="Next page (disabled)">Next →</span>
        {% endif %}
</nav>

<!-- Pagination Info -->
<div class="pagination-info">
    Showing {{ ((pagination.current_page - 1) * pagination.articles_per_page) + 1 }}
    to {{ [pagination.current_page * pagination.articles_per_page, pagination.total_articles] | min }}
    of {{ pagination.total_articles }} articles
</div>
{% endif %}
{% endblock %}

{% block scripts %}
<script>
    // Add any index-specific JavaScript here
    console.log('JabLab Tech News loaded');
</script>
{% endblock %}
