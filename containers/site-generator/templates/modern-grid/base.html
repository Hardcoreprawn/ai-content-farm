<!DOCTYPE html>
<html lang="en" data-theme="modern-grid">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{{ site.title }}{% endblock %}</title>
    <meta name="description" content="{% block description %}{{ site.description }}{% endblock %}">

    <!-- SEO Meta Tags -->
    <meta property="og:title" content="{% block og_title %}{{ site.title }}{% endblock %}">
    <meta property="og:description" content="{% block og_description %}{{ site.description }}{% endblock %}">
    <meta property="og:type" content="{% block og_type %}website{% endblock %}">
    <meta property="og:url" content="{{ site.url }}{% block og_url %}{% endblock %}">
    <meta property="og:image" content="{% block og_image %}{{ site.url }}/preview.png{% endblock %}">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{% block twitter_title %}{{ site.title }}{% endblock %}">
    <meta name="twitter:description" content="{% block twitter_description %}{{ site.description }}{% endblock %}">
    <meta name="twitter:image" content="{% block twitter_image %}{{ site.url }}/preview.png{% endblock %}">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">

    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Modern Grid Theme Styles -->
    <link rel="stylesheet" href="/modern-grid.css">

    <!-- RSS Feed -->
    <link rel="alternate" type="application/rss+xml" title="{{ site.title }}" href="/feed.xml">

    <!-- Theme Color for Mobile -->
    <meta name="theme-color" content="#6366f1">
    <meta name="color-scheme" content="light dark">

    {% block head %}{% endblock %}
</head>

<body class="{% block body_class %}{% endblock %}" data-page="{% block page_type %}default{% endblock %}">
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Header -->
    <header class="site-header">
        <div class="header-container">
            <div class="header-content">
                <!-- Logo and Site Title -->
                <div class="site-brand">
                    <a href="/" class="brand-link" aria-label="Go to homepage">
                        <div class="brand-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round">
                                <path d="M12 2L2 7l10 5 10-5-10-5z" />
                                <path d="m2 17 10 5 10-5" />
                                <path d="m2 12 10 5 10-5" />
                            </svg>
                        </div>
                        <div class="brand-text">
                            <h1 class="site-title">{{ site.title }}</h1>
                            <p class="site-tagline">{% block tagline %}AI-Curated Tech News{% endblock %}</p>
                        </div>
                    </a>
                </div>

                <!-- Navigation -->
                <nav class="main-nav" role="navigation" aria-label="Main navigation">
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="/" class="nav-link {% if request.path == '/' %}active{% endif %}"
                                aria-current="{% if request.path == '/' %}page{% endif %}">
                                <span class="nav-icon">üè†</span>
                                <span class="nav-text">Home</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="/feed.xml" class="nav-link" target="_blank" rel="noopener">
                                <span class="nav-icon">üì°</span>
                                <span class="nav-text">RSS</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <button class="theme-toggle" aria-label="Toggle dark mode" title="Toggle dark mode">
                                <span class="theme-icon theme-icon-light">‚òÄÔ∏è</span>
                                <span class="theme-icon theme-icon-dark">üåô</span>
                            </button>
                        </li>
                    </ul>
                </nav>

                <!-- Mobile Menu Toggle -->
                <button class="mobile-menu-toggle" aria-label="Toggle mobile menu" aria-expanded="false">
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                </button>
            </div>
        </div>

        <!-- Mobile Navigation Menu -->
        <div class="mobile-nav" role="navigation" aria-label="Mobile navigation">
            <ul class="mobile-nav-list">
                <li><a href="/" class="mobile-nav-link">üè† Home</a></li>
                <li><a href="/feed.xml" class="mobile-nav-link">üì° RSS Feed</a></li>
            </ul>
        </div>
    </header>

    <!-- Main Content -->
    <main id="main-content" class="site-main" role="main">
        <div class="main-container">
            {% block content %}
            <div class="content-placeholder">
                <h2>Content goes here</h2>
                <p>This is the base template. Content blocks should override this section.</p>
            </div>
            {% endblock %}
        </div>
    </main>

    <!-- Footer -->
    <footer class="site-footer" role="contentinfo">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section footer-info">
                    <h3 class="footer-title">{{ site.title }}</h3>
                    <p class="footer-description">{{ site.description }}</p>
                    <p class="footer-meta">
                        <span class="update-time">Updated {{ last_updated.strftime('%Y-%m-%d %H:%M UTC') if last_updated
                            else 'Recently' }}</span>
                    </p>
                </div>

                <div class="footer-section footer-links">
                    <h4 class="footer-section-title">Quick Links</h4>
                    <ul class="footer-link-list">
                        <li><a href="/" class="footer-link">Home</a></li>
                        <li><a href="/feed.xml" class="footer-link">RSS Feed</a></li>
                        <li><a href="/sitemap.xml" class="footer-link">Sitemap</a></li>
                    </ul>
                </div>

                <div class="footer-section footer-tech">
                    <h4 class="footer-section-title">Technology</h4>
                    <p class="footer-tech-info">
                        Powered by AI content curation and modern web technologies.
                    </p>
                    <p class="footer-theme-info">
                        Theme: Modern Grid v1.0.0
                    </p>
                </div>
            </div>

            <div class="footer-bottom">
                <div class="footer-bottom-content">
                    <p class="copyright">
                        ¬© {{ current_year or 2025 }} {{ site.title }}.
                        Content aggregated and curated by AI.
                    </p>
                    <div class="footer-badges">
                        <span class="badge badge-responsive">üì± Responsive</span>
                        <span class="badge badge-fast">‚ö° Fast</span>
                        <span class="badge badge-accessible">‚ôø Accessible</span>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="/modern-grid.js"></script>
    {% block scripts %}{% endblock %}

    <!-- Service Worker for Progressive Web App features -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function () {
                navigator.serviceWorker.register('/sw.js').then(function (registration) {
                    console.log('SW registered: ', registration);
                }).catch(function (registrationError) {
                    console.log('SW registration failed: ', registrationError);
                });
            });
        }
    </script>
</body>

</html>
